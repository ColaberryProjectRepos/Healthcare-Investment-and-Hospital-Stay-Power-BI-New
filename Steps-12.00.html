
Creating KPIs and Sub KPIs
12
<p><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1328/12/1.jpg"></p><ul style="list-style-position: initial; list-style-image: initial; padding: 0px; margin: 0.65em 0px 0.9em;"><li style="margin: 0.3em 0px 0px 2em;">First change the name of the main table to Hospital Stay and Investment</li><li style="margin: 0.3em 0px 0px 2em;">In the Home page on the Power BI Ribbon select new measure and on the Dax Formula pane use the below Measures to create the KPIs and save them on the My Measure table that we already created as shown in the GIF</li><li style="margin: 0.3em 0px 0px 2em;">Repeat the steps shown on the GIF for all the DAX Formulas below</li><li style="margin: 0.3em 0px 0px 2em;"><div style="margin: 0px;">Use the following Formulas to Create the KPIs</div><ul style="list-style: disc; padding: 0px; margin: 0.65em 0px 0.9em;"><li style="margin: 0.3em 0px 0px 2em;">CT Scanner = AVERAGE('Hospital Stay and Investment'[CT_Scanners])</li><li style="margin: 0.3em 0px 0px 2em;">CT YoY% = VAR CurrentYear = MAX('Hospital Stay and Investment'[Year])</li></ul><div style="margin: 0px;">&nbsp; &nbsp; VAR PriorYear = MAX('Hospital Stay and Investment'[Year]) - 1</div><div style="margin: 0px;">&nbsp; &nbsp; VAR CurrentYearCT = CALCULATE(SUM('Hospital Stay and Investment'[CT_Scanners]), 'Hospital Stay and Investment'[Year] = CurrentYear)</div><div style="margin: 0px;">&nbsp; &nbsp; VAR PriorYearCT = CALCULATE(SUM('Hospital Stay and Investment'[CT_Scanners]), 'Hospital Stay and Investment'[Year] = PriorYear)</div><div style="margin: 0px;">&nbsp; &nbsp; RETURN IF(ISBLANK(CurrentYearCT) || ISBLANK(PriorYearCT), BLANK(), CurrentYearCT / PriorYearCT - 1)</div><ul style="list-style: disc; padding: 0px; margin: 0.65em 0px 0.9em;"><li style="margin: 0.3em 0px 0px 2em;">HB YoY% =&nbsp;</li></ul><div style="margin: 0px;">VAR CurrentYear = MAX('Hospital Stay and Investment'[Year])</div><div style="margin: 0px;">VAR PriorYear = MAX('Hospital Stay and Investment'[Year]) - 1</div><div style="margin: 0px;">VAR CurrentYearHospitalBeds = CALCULATE(SUM('Hospital Stay and Investment'[Hospital_Beds]), 'Hospital Stay and Investment'[Year] = CurrentYear)</div><div style="margin: 0px;">VAR PreviousYearHospitalBeds = CALCULATE(SUM('Hospital Stay and Investment'[Hospital_Beds]), 'Hospital Stay and Investment'[Year] = PriorYear)</div><div style="margin: 0px;">RETURN DIVIDE(CurrentYearHospitalBeds - PreviousYearHospitalBeds, PreviousYearHospitalBeds, 0)</div><ul style="list-style: disc; padding: 0px; margin: 0.65em 0px 0.9em;"><li style="margin: 0.3em 0px 0px 2em;">Hospital Beds = AVERAGE('Hospital Stay and Investment'[Hospital_Beds])</li><li style="margin: 0.3em 0px 0px 2em;">Hospital Stay = AVERAGE('Hospital Stay and Investment'[Hospital_Stay])</li><li style="margin: 0.3em 0px 0px 2em;">HS YoY% =&nbsp;<br>VAR CurrentYear = MAX('Hospital Stay and Investment'[Year])<br>VAR PriorYear = MAX('Hospital Stay and Investment'[Year]) - 1<br>VAR CurrentYearHospitalStay = CALCULATE(SUM('Hospital Stay and Investment'[Hospital_Stay]), 'Hospital Stay and Investment'[Year] = CurrentYear)<br>VAR PreviousYearHospitalStay = CALCULATE(SUM('Hospital Stay and Investment'[Hospital_Stay]), 'Hospital Stay and Investment'[Year] = PriorYear)<br>RETURN DIVIDE(CurrentYearHospitalStay - PreviousYearHospitalStay, PreviousYearHospitalStay, 0)</li><li style="margin: 0.3em 0px 0px 2em;">MRI Units = AVERAGE('Hospital Stay and Investment'[MRI_Units])</li><li style="margin: 0.3em 0px 0px 2em;">MRI YoY% =&nbsp;<br>VAR CurrentYear = MAX('Hospital Stay and Investment'[Year])<br>VAR PriorYear = MAX('Hospital Stay and Investment'[Year]) - 1<br>VAR CurrentYearHospitalStay = CALCULATE(SUM('Hospital Stay and Investment'[MRI_Units]), 'Hospital Stay and Investment'[Year] = CurrentYear)<br>VAR PreviousYearHospitalStay = CALCULATE(SUM('Hospital Stay and Investment'[MRI_Units]), 'Hospital Stay and Investment'[Year] = PriorYear)<br>RETURN DIVIDE(CurrentYearHospitalStay - PreviousYearHospitalStay, PreviousYearHospitalStay, 0)</li><li style="margin: 0.3em 0px 0px 2em;">Total MRI Units = SUM('Hospital Stay and Investment'[MRI_Units])</li><li style="margin: 0.3em 0px 0px 2em;">Arrow CT Scanner Change = IF([CT YoY%]&gt;0,UNICHAR(9650),UNICHAR(9660))</li><li style="margin: 0.3em 0px 0px 2em;">Arrow HB = IF([HB YoY%]&gt;0,UNICHAR(9650),UNICHAR(9660))</li><li style="margin: 0.3em 0px 0px 2em;">Arrow HS = IF([HS YoY%]&gt;0,UNICHAR(9650),UNICHAR(9660))</li><li style="margin: 0.3em 0px 0px 2em;">Arrow MRI YOY = IF([MRI YoY%]&gt;0,UNICHAR(9650),UNICHAR(9660))</li><li style="margin: 0.3em 0px 0px 2em;">Color Arrow CT Scanner = IF ([CT YoY%]&gt;0,"Green","Red")</li><li style="margin: 0.3em 0px 0px 2em;">Color Arrow HB YOY = IF ([HB YoY%]&gt;0,"Green","Red")</li><li style="margin: 0.3em 0px 0px 2em;">Color Arrow Hospital Stay = IF ([HS YoY%]&gt;0,"Red","Green")</li><li style="margin: 0.3em 0px 0px 2em;">Color Arrow MRI YOY = IF ([MRI YoY%]&gt;0,"Green","Red")</li></ul></li></ul><p style="margin: 0.3em 0px 0px 2em;"><ul style="list-style: disc; padding: 0px; margin: 0.65em 0px 0.9em;"></ul></p><p style="margin: 0.3em 0px 0px 2em;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1328/12/2.gif" style="width: 50%;"></p>

<p><a href="https://www.sqlbi.com/articles/creating-kpis-in-power-bi-desktop/" target="_blank">Creating KPI using DAX Formula</a><br></p>

